# ğŸ­ GUÃA DE PRODUCCIÃ“N - MEDICINA VIVA

GuÃ­a completa para registrar producciÃ³n y gestionar stock de productos e ingredientes.

---

## ğŸ¯ Â¿QUÃ‰ HACE LA PRODUCCIÃ“N?

Cuando registras producciÃ³n:
1. âœ… **Stock del producto** aumenta (las unidades que hiciste)
2. âœ… **Ingredientes** se descuentan automÃ¡ticamente
3. âœ… Se guarda el movimiento en historial

---

## ğŸ“‹ INTERFAZ DE PRODUCCIÃ“N

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Producto que Produjiste:                     â”‚
â”‚ [Torta de Chocolate â–¼]                       â”‚
â”‚ El producto que acabas de hacer              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Stock Producido (Unidades):                  â”‚
â”‚ [10]                                         â”‚
â”‚ Â¿CuÃ¡ntas unidades produjiste?                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Nota / Motivo:                               â”‚
â”‚ [ProducciÃ³n del dÃ­a...]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¦ PRODUCTO FINAL:                           â”‚
â”‚ Stock Actual: 5                              â”‚
â”‚ Vas a Producir: +10                          â”‚
â”‚ Stock DespuÃ©s: 15                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ§ª INGREDIENTES QUE SE VAN A DESCONTAR:      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Harina de Almendras]              kg        â”‚
â”‚ Por unidad: 1  â”‚ Total usar: 10              â”‚
â”‚ Stock actual: 50 â”‚ Stock despuÃ©s: 40 ğŸŸ¢      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Aceite de Coco]                   litros    â”‚
â”‚ Por unidad: 0.2 â”‚ Total usar: 2              â”‚
â”‚ Stock actual: 30 â”‚ Stock despuÃ©s: 28 ğŸŸ¢      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Stevia]                           kg        â”‚
â”‚ Por unidad: 0.1 â”‚ Total usar: 1              â”‚
â”‚ Stock actual: 5  â”‚ Stock despuÃ©s: 4 ğŸŸ¢       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Cacao]                            kg        â”‚
â”‚ Por unidad: 0.3 â”‚ Total usar: 3              â”‚
â”‚ Stock actual: 8  â”‚ Stock despuÃ©s: 5 ğŸŸ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Cancelar]            [ğŸ­ Registrar ProducciÃ³n]
```

---

## ğŸš€ FLUJO COMPLETO PASO A PASO

### **PASO 1: Configurar Producto (Una vez)**

```bash
1. Admin â†’ Productos â†’ Editar producto

2. Configura campos de stock:
   Stock Disponible: 0
   Stock MÃ­nimo: 5

3. Agrega ingredientes (receta):
   Click en "+ Agregar Ingrediente"
   
   Ingrediente 1:
   â†’ Harina de Almendras
   â†’ Cantidad: 1 kg (por unidad)
   
   Ingrediente 2:
   â†’ Aceite de Coco
   â†’ Cantidad: 0.2 litros (por unidad)
   
   Ingrediente 3:
   â†’ Stevia
   â†’ Cantidad: 0.1 kg (por unidad)

4. Guardar

5. âœ… Producto configurado con receta
```

---

### **PASO 2: Verificar Stock de Ingredientes**

```bash
1. Admin â†’ Ingredientes

2. Verifica que tengas stock suficiente:
   
   âœ… Harina: 50 kg (suficiente)
   âœ… Aceite: 30 L (suficiente)
   âœ… Stevia: 5 kg (suficiente)

3. Si alguno estÃ¡ bajo:
   â†’ Edita el ingrediente
   â†’ Aumenta el stock
   â†’ Guarda
```

---

### **PASO 3: Registrar ProducciÃ³n**

```bash
1. Admin â†’ ProducciÃ³n
   http://localhost:8080/admin/produccion

2. Selecciona producto:
   "Torta de Chocolate"

3. Define cantidad:
   "10 unidades"

4. VerÃ¡s automÃ¡ticamente:

   ğŸ“¦ PRODUCTO FINAL:
   Stock Actual: 0
   Vas a Producir: +10
   Stock DespuÃ©s: 10

   ğŸ§ª INGREDIENTES A DESCONTAR:
   
   Harina de Almendras (kg)
   â”œâ”€ Por unidad: 1
   â”œâ”€ Total usar: 10
   â”œâ”€ Stock actual: 50
   â””â”€ Stock despuÃ©s: 40 ğŸŸ¢

   Aceite de Coco (litros)
   â”œâ”€ Por unidad: 0.2
   â”œâ”€ Total usar: 2
   â”œâ”€ Stock actual: 30
   â””â”€ Stock despuÃ©s: 28 ğŸŸ¢

   Stevia (kg)
   â”œâ”€ Por unidad: 0.1
   â”œâ”€ Total usar: 1
   â”œâ”€ Stock actual: 5
   â””â”€ Stock despuÃ©s: 4 ğŸŸ¢

5. Revisa que todo estÃ© correcto

6. Click en "ğŸ­ Registrar ProducciÃ³n"

7. âœ… RESULTADO:
   - NotificaciÃ³n de Ã©xito
   - Stock producto: 0 â†’ 10
   - Harina: 50 â†’ 40 kg
   - Aceite: 30 â†’ 28 L
   - Stevia: 5 â†’ 4 kg
```

---

## ğŸ“Š INFORMACIÃ“N MOSTRADA

### **1. Por unidad:**
```
Cantidad de ingrediente para 1 producto
Ejemplo: 1 kg de harina por torta
```

### **2. Total usar:**
```
Cantidad total que se va a descontar
CÃ¡lculo: Por unidad Ã— Cantidad a producir
Ejemplo: 1 kg Ã— 10 tortas = 10 kg
```

### **3. Stock actual:**
```
CuÃ¡nto tienes ahora del ingrediente
Ejemplo: 50 kg disponibles
```

### **4. Stock despuÃ©s:**
```
CuÃ¡nto quedarÃ¡ despuÃ©s de producir
CÃ¡lculo: Stock actual - Total usar
Ejemplo: 50 kg - 10 kg = 40 kg

Colores:
ğŸŸ¢ Verde: Stock despuÃ©s > mÃ­nimo
ğŸŸ  Naranja: Stock despuÃ©s â‰¤ mÃ­nimo
ğŸ”´ Rojo: Stock insuficiente (no puedes producir)
```

---

## âš ï¸ VALIDACIONES AUTOMÃTICAS

### **Si NO tiene ingredientes:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸ Este producto no tiene receta         â”‚
â”‚                                          â”‚
â”‚ Debes asignar ingredientes antes de     â”‚
â”‚ registrar producciÃ³n.                    â”‚
â”‚                                          â”‚
â”‚ [Ir a configurar receta â†’]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BotÃ³n de registrar DESHABILITADO
```

---

### **Si NO hay stock suficiente:**
```
Ingrediente con borde ROJO:

Cacao (kg)
â”œâ”€ Por unidad: 0.3
â”œâ”€ Total usar: 15  â† Quieres usar
â”œâ”€ Stock actual: 8  â† Solo tienes
â””â”€ Stock despuÃ©s: âŒ INSUFICIENTE

BotÃ³n de registrar DESHABILITADO
```

---

## ğŸ’¡ EJEMPLOS PRÃCTICOS

### **Ejemplo 1: ProducciÃ³n Normal**

```bash
SituaciÃ³n:
- Tienes todos los ingredientes
- Vas a hacer 10 tortas

Pasos:
1. Admin â†’ ProducciÃ³n
2. Producto: Torta de Chocolate
3. Cantidad: 10
4. Ves resumen:
   âœ… Harina: 10 kg â†’ OK
   âœ… Aceite: 2 L â†’ OK
   âœ… Stevia: 1 kg â†’ OK
5. Registrar
6. âœ… ProducciÃ³n exitosa
```

---

### **Ejemplo 2: Stock Insuficiente**

```bash
SituaciÃ³n:
- Stevia solo tiene 0.5 kg
- Necesitas 1 kg para 10 tortas

Pasos:
1. Admin â†’ ProducciÃ³n
2. Producto: Torta
3. Cantidad: 10
4. Sistema detecta:
   âŒ Stevia: Stock despuÃ©s INSUFICIENTE
5. Opciones:
   A) Reducir cantidad (hacer solo 5 tortas)
   B) Ir a reponer stock de Stevia
6. Si eliges A:
   Cantidad: 5
   âœ… Ahora sÃ­ puedes producir
```

---

### **Ejemplo 3: Alerta de Stock Bajo**

```bash
SituaciÃ³n:
- Cacao tiene 10 kg
- MÃ­nimo es 8 kg
- Vas a usar 3 kg

Pasos:
1. Registras producciÃ³n de 10 tortas
2. Sistema muestra:
   ğŸŸ  Cacao: Stock despuÃ©s 7 kg (bajo del mÃ­nimo)
3. Puedes producir (no estÃ¡ bloqueado)
4. Pero te advierte que quedarÃ¡s con stock bajo
5. DecisiÃ³n:
   - Producir igual
   - O comprar cacao primero
```

---

## ğŸ¨ CÃ“DIGOS DE COLOR

```
ğŸŸ¢ VERDE (Stock OK):
   Stock despuÃ©s > Stock mÃ­nimo
   Todo bien

ğŸŸ  NARANJA (Stock Bajo):
   Stock despuÃ©s â‰¤ Stock mÃ­nimo
   Alerta pero puedes producir

ğŸ”´ ROJO (Insuficiente):
   Stock actual < Cantidad necesaria
   NO puedes producir
   BotÃ³n DESHABILITADO
```

---

## ğŸ“Š VISTA DETALLADA POR INGREDIENTE

Cada ingrediente muestra 4 datos clave:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HARINA DE ALMENDRAS            kg    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Por unidad:     1                    â”‚
â”‚ Total usar:     10  â† Cantidad Ã— unidâ”‚
â”‚ Stock actual:   50  â† Lo que tienes  â”‚
â”‚ Stock despuÃ©s:  40  â† DespuÃ©s de prodâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ FLUJO DE CÃLCULOS

```
1. Seleccionas producto
   â†“
2. Sistema carga receta del producto
   â†“
3. Defines cantidad a producir (ej: 10)
   â†“
4. Sistema calcula por cada ingrediente:
   Total usar = Cantidad por unidad Ã— 10
   Stock despuÃ©s = Stock actual - Total usar
   â†“
5. Muestra resultado con colores
   â†“
6. Si todo OK: Habilita botÃ³n
   Si falta algo: Deshabilita botÃ³n
   â†“
7. Registras
   â†“
8. Base de datos actualiza todo automÃ¡ticamente
```

---

## âœ… CHECKLIST ANTES DE PRODUCIR

```
[ ] Producto tiene receta configurada
[ ] Todos los ingredientes tienen stock
[ ] Stock suficiente para la cantidad deseada
[ ] Verificaste el resumen
[ ] Confirmaste las cantidades
```

---

## ğŸš¨ MENSAJES DE ERROR

### **"Producto no tiene receta"**
```
Causa: No has asignado ingredientes al producto

SoluciÃ³n:
1. Click en "Ir a configurar receta"
2. Agrega ingredientes
3. Guarda
4. Vuelve a ProducciÃ³n
```

---

### **"Ingredientes insuficientes"**
```
Causa: No hay stock suficiente de algÃºn ingrediente

SoluciÃ³n:
1. Ve a Ingredientes
2. Repone stock del ingrediente faltante
3. Vuelve a ProducciÃ³n
4. Intenta de nuevo
```

---

### **"Error al registrar producciÃ³n"**
```
Causa posible: FunciÃ³n SQL no ejecutada

SoluciÃ³n:
1. Verifica que ejecutaste:
   database/stock_management.sql
2. Verifica en Supabase que la funciÃ³n existe
3. Recarga navegador
```

---

## ğŸ“± ACCESOS RÃPIDOS

```
Registrar ProducciÃ³n:
â†’ http://localhost:8080/admin/produccion

Gestionar Ingredientes:
â†’ http://localhost:8080/admin/ingredientes

Configurar Productos:
â†’ http://localhost:8080/admin/productos
```

---

## ğŸ’¼ CASO DE USO COMPLETO

### **Escenario: ProducciÃ³n Matutina**

```bash
Lunes 8 AM - Vas a producir

1. Revisas pedidos del dÃ­a:
   - 5 tortas de chocolate
   - 10 galletas de avena
   - 3 brownies

2. Admin â†’ ProducciÃ³n

3. Primera producciÃ³n:
   Producto: Torta de Chocolate
   Cantidad: 5
   
   Sistema muestra:
   âœ… Harina: Usar 5 kg, tienes 50 kg â†’ 45 kg
   âœ… Aceite: Usar 1 L, tienes 30 L â†’ 29 L
   âœ… Stevia: Usar 0.5 kg, tienes 5 kg â†’ 4.5 kg
   
   Registrar âœ“

4. Segunda producciÃ³n:
   Producto: Galletas de Avena
   Cantidad: 10
   
   Sistema muestra ingredientes
   Verificas todo OK
   Registrar âœ“

5. Tercera producciÃ³n:
   Producto: Brownies
   Cantidad: 3
   
   Sistema muestra ingredientes
   Registrar âœ“

6. RESULTADO FINAL:
   Productos:
   â”œâ”€ Torta: +5 unidades
   â”œâ”€ Galletas: +10 unidades
   â””â”€ Brownies: +3 unidades
   
   Ingredientes:
   â”œâ”€ Harina: Descontado segÃºn recetas
   â”œâ”€ Aceite: Descontado segÃºn recetas
   â””â”€ Etc...

7. Dashboard:
   âœ… Stock productos actualizado
   âœ… Stock ingredientes actualizado
   âœ… Si algo quedÃ³ bajo: Alerta visible
```

---

## ğŸ¯ VENTAJAS DEL SISTEMA

```
âœ… Ves TODO antes de confirmar
âœ… Ingredientes mostrados claramente
âœ… Cantidades calculadas automÃ¡ticamente
âœ… Alertas de stock bajo
âœ… No puedes producir sin stock
âœ… Historial de todo
âœ… Trazabilidad completa
```

---

## ğŸ“Š INFORMACIÃ“N CLAVE

### **Por Unidad:**
```
Cantidad de ingrediente para 1 producto
Se define en: Productos â†’ Editar â†’ Agregar Ingrediente
```

### **Total Usar:**
```
Cantidad total a descontar del ingrediente
CÃ¡lculo: Por unidad Ã— Cantidad a producir
```

### **Stock DespuÃ©s:**
```
CuÃ¡nto quedarÃ¡ de ingrediente
CÃ¡lculo: Stock actual - Total usar
Color segÃºn nivel
```

---

## âœ… RESUMEN

```
PÃ¡gina de ProducciÃ³n muestra:

âœ… Selector de producto
âœ… Cantidad a producir
âœ… Preview de stock producto (antes/despuÃ©s)
âœ… Lista detallada de ingredientes
âœ… Cantidades por unidad
âœ… Total a usar de cada ingrediente
âœ… Stock actual de cada ingrediente
âœ… Stock despuÃ©s de producir
âœ… Colores segÃºn nivel
âœ… ValidaciÃ³n automÃ¡tica
âœ… BotÃ³n habilitado solo si hay stock
âœ… Alerta si no tiene receta
```

---

**Â¡Sistema completo de producciÃ³n con informaciÃ³n clara y visual!** ğŸ­ğŸ’šâœ¨

**Fecha:** Diciembre 2024  
**Estado:** âœ… IMPLEMENTADO  
**VersiÃ³n:** 2.0

